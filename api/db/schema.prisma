datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider      = "prisma-client-js"
  binaryTargets = "native"
}

// Define your own datamodels here and run `yarn redwood prisma migrate dev`
// to create migrations for them and apply to your dev DB.
// TODO: Please remove the following example:
model User {
  id                  Int           @id @default(autoincrement())
  email               String        @unique
  username            String        @unique
  name                String?
  hashedPassword      String
  salt                String
  resetToken          String?
  resetTokenExpiresAt DateTime?
  itemsForSale        ItemForSale[]
  location            String        @default("UK")
  roles               String        @default("moderator")
}

model Card {
  id                Int           @id @default(autoincrement())
  name              String        @unique
  setName           String
  startingFromPrice Float
  cardImage         String
  color             String
  cardType          String
  manaValue         Int
  releaseYear       Int
  itemsForSale      ItemForSale[]
}

model ItemForSale {
  id        Int    @id @default(autoincrement())
  name      String
  quantity  Int
  price     Float
  condition String @default("NM")
  card      Card   @relation(fields: [cardId], references: [id])
  cardId    Int
  user      User   @relation(fields: [userId], references: [id])
  userId    Int
}
